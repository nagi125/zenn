---
title: "Laravelã«Routeãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['PHP', 'Laravel']
published: true
---

## æ¦‚è¦
è¡¨å´ã¨ç®¡ç†ç”»é¢å´ã§Routeãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ãŸããªã£ãŸãŸã‚èª¿æŸ»ã—ãŸå†…å®¹ã‚’è¨˜éŒ²ã—ã¦ãŠã

## ç’°å¢ƒ
Laravel5.8(6ç³»ã¾ã§å¤§ä¸ˆå¤«ãªã®ã¯ç¢ºèªã—ã¦ã„ã¾ã™)

## è¨­å®š
App/Providers/RouteServiceProvider.phpã«ãƒ«ãƒ¼ãƒˆã®è¿½è¨˜ã‚’ã™ã‚‹ã€‚
ä»Šå›ã¯mapAdminRoutesã‚’å®šç¾©ã—ã¦mapãƒ¡ã‚½ãƒƒãƒ‰ã«è¿½åŠ ã™ã‚‹ã€‚
prefixã‚„middlewareã®è¨­å®šã‚‚ã§ãã‚‹ãŸã‚ã€å¿…è¦ãªã‚‰è¨­å®šã‚’ã™ã‚‹ã€‚

### Routeãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š
RouteServiceProvider.php
```php
<?php
class RouteServiceProvider extends ServiceProvider
{

    /**
     * Define the routes for the application.
     *
     * @return void
     */
    public function map()
    {
        $this->mapApiRoutes();

        $this->mapWebRoutes();
        
        // æ›¸ãè¶³ã™
        $this->mapAdminRoutes();

        //
    }
    
    // ...
    
    // middlewareã®ã‚°ãƒ«ãƒ¼ãƒ—ã¯è¤‡æ•°æŒ‡å®šã§ãã‚‹ãŸã‚ã€webã¨adminã‚’æŒ‡å®šã™ã‚‹
    protected function mapAdminRoutes()
    {
        Route::prefix('admin')
            ->middleware(['web', 'admin'])
            ->namespace($this->namespace)
            ->group(base_path('routes/web_admin.php'));
    }

}
```

### Middlewareã®è¨­å®š
ä»Šå›ã¯adminRouteã®middlewareã«ã€Œadminã€ã‚’è¨­å®šã—ãŸãŸã‚ã€middlewareGroupsã«adminã‚’è¿½åŠ ã™ã‚‹ã€‚

Kernel.php
```php
<?php
class Kernel extends HttpKernel
{
    /**
     * The application's route middleware groups.
     *
     * @var array
     */
    protected $middlewareGroups = [
        
        // ...

        'admin' => [
            // adminå´ã§åˆ©ç”¨ã™ã‚‹middlewareã‚’è¨˜è¿°ã™ã‚‹
        ],
        
        // ...
    ];

}
```

### Routeã®è¨­å®š
adminã®Routeãƒ•ã‚¡ã‚¤ãƒ«ã¯web_admin.phpã¨ã—ãŸã®ã§ãã¡ã‚‰ã«è¨˜å…¥ã—ã¦ã„ãã€‚

routes/web_admin.php
```php
<?php

use Illuminate\Routing\Route;

// prefix=adminã®è¨­å®šã‚’ã—ã¦ã„ã‚‹ã®ã§/adminã®è¨˜è¿°ã¯å¿…è¦ãªã—
Route::get('/dashboard', 'Admin\DefaultController@dashboard');

```
