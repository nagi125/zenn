---
title: "Nuxt + Laravelã«ã‚ˆã‚‹SPAé–‹ç™º(ãƒªãƒã‚¸ãƒˆãƒªåˆ†å‰²)"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [nuxtjs, laravel, docker]
published: false
---

## æ¦‚è¦
ä»•äº‹ã§Nuxtã¨Laravelã§SPAã‚’æ§‹ç¯‰ã™ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸãŸã‚é–‹ç™ºæ‰‹æ³•ã‚’ã¾ã¨ã‚ã¦ãŠã

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- Nuxt: 2.14.x
- PHP: 8.0.x
- Laravel: 8.x
- PostgreSQL: 12.x

## å‰æ
Laravelã®å…¬å¼ã§ã¯èªè¨¼ã§Sanctumã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’å‹§ã‚ã¦ã„ã¾ã™ãŒã€
Multièªè¨¼æ–¹æ³•ãŒèª¿ã¹ã¦ã‚‚ã§ã¦ã“ãªã‹ã£ãŸãŸã‚Sessionèªè¨¼ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã€‚

## æ§‹æˆå›³
![](https://storage.googleapis.com/zenn-user-upload/28e7un4lkhutnucyc68bdqtpvw2v)

## Nuxtå´è¨­å®š
### å®Œæˆå“
https://github.com/nagi125/sample-spa-nuxt

### docker-compose
æ§‹æˆå›³ã®å·¦ã®ã‚ˆã†ã«Nuxtã‚³ãƒ³ãƒ†ãƒŠã ã‘ã®æ§‹æˆã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚
Backendã¨ã®é€šä¿¡ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«Networkã‚’Backendã§å®šç¾©ã—ã¦ã„ã‚‹sample-spaã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```yml
# docker-compose.yml
version: '3'
services:
  web:
    container_name: sample-spa-nuxt
    build:
      context: ./.docker/web
      dockerfile: Dockerfile
    environment:
      PORT: '3000'
      HOST: '0.0.0.0'
      BASE_URL: 'http://nginx'
    ports:
      - 3000:3000
    volumes:
      - .:/app
    stdin_open: true
    tty: true
    restart: always
    networks:
      - sample-spa

networks:
  sample-spa:
    external: true
```

## Laravelå´è¨­å®š
### å®Œæˆå“
https://github.com/nagi125/sample-spa-laravel

### docker-compose
æ§‹æˆå›³ã®å³å´ã®ã‚ˆã†ã«Nginx + PHP-FPMã®æ§‹æˆã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚
ã¾ãŸNuxtã‹ã‚‰ç›´æ¥é€šä¿¡ã™ã‚‹ãŸã‚ã«dockerã®Networkã‚’å…±é€šã®ã€Œsample-spaã€ã¨ã—ã¦ã„ã¾ã™ã€‚

```yml
# docker-compose.yml
version: '3'
services:
  nginx:
    container_name: sample-spa-nginx
    build:
      context: .docker/nginx
      dockerfile: Dockerfile
    ports:
      - 80:80
    volumes:
      - .:/app
    tty: true
    depends_on:
      - api

  api:
    container_name: sample-spa-api
    build:
      context: .docker/api
      dockerfile: Dockerfile
    environment:
      LANG: 'ja_JP.UTF-8'
      TZ: 'Asia/Tokyo'
      APP_NAME: 'Laravel'
      APP_ENV: 'development'
      APP_DEBUG: 'true'
      APP_URL: 'http://localhost'
      LOG_CHANNEL: 'stderr'
      DB_CONNECTION: 'pgsql'
      DB_HOST: 'db'
      DB_PORT: '5432'
      DB_DATABASE: 'laravel_development'
      DB_DATABASE_TEST: 'laravel_testing'
      DB_USERNAME: 'docker'
      DB_PASSWORD: 'docker'
    env_file:
      - .env
    volumes:
      - .:/app
    expose:
      - 9000
    tty: true
    depends_on:
      - db

  db:
    image: postgres:12-alpine
    container_name: sample-spa-db
    environment:
      TZ: 'Asia/Tokyo'
      POSTGRES_USER: 'docker'
      POSTGRES_PASSWORD: 'docker'
      POSTGRES_DB: 'laravel_development'
    volumes:
      - ./.docker/db/data:/var/lib/postgresql/data
      - ./.docker/db/sql:/docker-entrypoint-initdb.d
    ports:
      - 5432:5432

networks:
  default:
    name: sample-spa
```